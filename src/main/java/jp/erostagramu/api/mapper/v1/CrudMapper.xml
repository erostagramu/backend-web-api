<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jp.erostagramu.api.mapper.v1.CrudMapper">
	<resultMap id="movieResult" type="jp.erostagramu.api.dao.masterdb.dto.MovieDto">
		<result column="id" property="id" />
		<result column="no" property="no" />
		<result column="thumbnail_url" property="thumbnailUrl" />
		<result column="title" property="title" />
		<result column="category_id_01" property="categoryId01" />
		<result column="category_id_02" property="categoryId02" />
		<result column="category_id_03" property="categoryId03" />
		<result column="category_id_04" property="categoryId04" />
		<result column="category_id_05" property="categoryId05" />
		<result column="resource_id" property="resourceId" />
		<result column="sys_create_date" property="sysCreateDate" />
		<result column="sys_update_date" property="sysUpdateDate" />
	</resultMap>

	<insert id="insert" parameterType="jp.erostagramu.api.dao.masterdb.dto.MovieDto"
		useGeneratedKeys="true" keyProperty="no">
		INSERT INTO i_movies
		(id,thumbnail_url,title,category_id_01,category_id_02,category_id_03,category_id_04,category_id_05,resource_id)
		VALUES
		(#{id},#{thumbnailUrl},#{title},#{categoryId01},#{categoryId02},#{categoryId03},#{categoryId04},#{categoryId05},#{resourceId})
	</insert>
	
	<update id="update" parameterType="jp.erostagramu.api.dao.masterdb.dto.UpdateDto"
		useGeneratedKeys="true" keyProperty="no">
		UPDATE i_movies
		SET thumbnail_url = #{updateContents.thumbnailUrl}, title = #{updateContents.title}, category_id_01 = #{updateContents.categoryId01}, category_id_02 = #{updateContents.categoryId02}, 
		category_id_03 = #{updateContents.categoryId03}, category_id_04 = #{updateContents.categoryId04}, category_id_05 = #{updateContents.categoryId05}, resource_id = #{updateContents.resourceId} 
		WHERE id = #{movieId} 
	</update>
	
	<select id="getTitleById" resultMap="movieResult" parameterType="Integer">
		SELECT title
		FROM i_movies
		WHERE id = #{id}
	</select>
	
	<select id="getCountById" resultType="Integer" parameterType="Integer">
		SELECT count(*)
		FROM i_movies
		WHERE id = #{id}
	</select>
	
</mapper>