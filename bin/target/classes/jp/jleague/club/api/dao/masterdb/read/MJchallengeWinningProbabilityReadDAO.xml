<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jp.jleague.club.api.dao.masterdb.read.MJchallengeWinningProbabilityReadDAO">

<select id="selectWinningProbability" resultType="java.lang.Integer">
select
	m.winning_probability
from
	i_jc_winning_logic i
inner join 
	m_jc_winning_probability m 
on i.winning_probability_id = m.winning_probability_id
where i.game_id = #{gameId}
AND i.pickup_flg = #{pickupFlg}
AND cast(#{currentDate} as DATE) between i.winning_start_date and i.winning_end_date
AND i.period_ticket_num > 0
</select>

</mapper> 
