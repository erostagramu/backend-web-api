<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jp.jleague.club.api.dao.masterdb.write.IAwWinningLogicWriteDAO">

	<update id="updateKeepTicket" parameterType="java.util.Map">
		update i_aw_winning_logic
			set period_ticket_num = period_ticket_num - 1
			, update_datetime = #{now}
		where awards_event_id = #{awardsEventId}
		and seat_type = #{seatType}
		<if test="clubIdConditions != null">
		and club_id = #{clubId}
		</if>
		and branch_number = #{branchNumber}
	</update>

</mapper>
