<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jp.jleague.club.api.dao.masterdb.write.IBcClubWatchingNumWriteDAO">
	<resultMap type="jp.jleague.club.api.dao.masterdb.dto.IBcClubWatchingNumDTO" id="IBcClubWatchingNumDTO">
		<result column="member_id" property="memberId" javaType="java.lang.String" />
		<result column="club_id" property="clubId" javaType="java.lang.String" />
		<result column="club_name_roughly" property="clubNameRoughly" javaType="java.lang.String" />
		<result column="waching_num" property="wachingNum" javaType="java.lang.Integer" />
		<result column="watching_level" property="watchingLevel" javaType="java.lang.Integer" />
		<result column="support_win_num" property="supportWinNum" javaType="java.lang.Integer" />
		<result column="watching_win_level" property="watchingWinLevel" javaType="java.lang.Integer" />
		<result column="support_lose_num" property="supportLoseNum" javaType="java.lang.Integer" />
		<result column="support_lose_level" property="supportLoseLevel" javaType="java.lang.Integer" />
		<result column="regist_datetime" property="registDatetime" javaType="java.util.Date" />
		<result column="update_datetime" property="updateDatetime" javaType="java.util.Date" />
	</resultMap>

	<select id="selectClubWatchingNumDetail" parameterType="jp.jleague.club.api.dao.masterdb.dto.IBcClubWatchingNumDTO" resultMap="IBcClubWatchingNumDTO">
		select
			member_id,
			club_id,
			club_name_roughly,
			waching_num,
			watching_level,
			support_win_num,
			watching_win_level,
			support_lose_num,
			support_lose_level,
			regist_datetime,
			update_datetime
		from i_bc_club_watching_num
		where member_id = #{memberId}
		  and club_id = #{clubId}
	</select>

	<update id="updateClubWatchinNumLevel" parameterType="jp.jleague.club.api.dao.masterdb.dto.IBcClubWatchingNumDTO">
		update i_bc_club_watching_num
		set
			member_id = #{memberId},
			club_id = #{clubId},
			club_name_roughly = #{clubNameRoughly},
			waching_num = #{wachingNum},
			watching_level = #{watchingLevel},
			support_win_num = #{supportWinNum},
			watching_win_level = #{watchingWinLevel},
			support_lose_num = #{supportLoseNum},
			support_lose_level = #{supportLoseLevel},
			update_datetime = #{updateDatetime}
		where member_id = #{memberId}
		  and club_id = #{clubId}
	</update >
	
	<insert id="insertIBcClubWatchingNum" parameterType="jp.jleague.club.api.dao.masterdb.dto.IBcClubWatchingNumDTO">
		insert into i_bc_club_watching_num
			(member_id,
			 club_id,
			 club_name_roughly,
			 waching_num ,
		     watching_level ,
		     support_win_num ,
		     watching_win_level ,
		     support_lose_num ,
		     support_lose_level ,
		     regist_datetime ,
		     update_datetime)
		values
		    (#{memberId},
			 #{clubId},
			 #{clubNameRoughly},
			 #{wachingNum},
			 #{watchingLevel},
			 #{supportWinNum},
			 #{watchingWinLevel},
			 #{supportLoseNum},
			 #{supportLoseLevel},
			 #{registDatetime},
			 #{updateDatetime})			 
	</insert>

	<update id="updateIBcClubWatchingNum" parameterType="jp.jleague.club.api.dao.masterdb.dto.IBcClubWatchingNumDTO">
		update i_bc_club_watching_num
		   set waching_num = #{wachingNum},
		       update_datetime = #{updateDatetime}
	     where member_id = #{memberId}
	       and club_id = #{clubId} 
	</update>
</mapper>
